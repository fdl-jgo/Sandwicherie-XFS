<?php
namespace AppBundle\Repository;
/**
 * LignePanierRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class LignePanierRepository extends \Doctrine\ORM\EntityRepository
{
    // PRoblem here !
    public function find_lines($panier_id)
    {
        $sql = '	SELECT p
					FROM AppBundle:LignePanier p
					LEFT JOIN p.sandwich s
					LEFT JOIN s.SandwichGarniture sg
					LEFT JOIN s.pain pain
					WHERE p.panier = :id_panier';
        // $sql =
        // SELECT DISTINCT *
        // FROM ligne_panier
        // LEFT JOIN sandwich ON ligne_panier.sandwich_id = sandwich.id
        // LEFT JOIN sandwich_garniture ON sandwich_garniture.sandwich_id = sandwich.id
        // LEFT JOIN pain ON sandwich.pain_id = pain.id
        // WHERE ligne_panier.id = :panier_id
        return $this->getEntityManager()
            ->createQuery($sql)
            ->setParameter(':id_panier', $panier_id)
            ->getResult();
    }
}